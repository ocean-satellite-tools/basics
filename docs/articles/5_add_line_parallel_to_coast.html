<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Add lines parallel to coast • basics</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Add lines parallel to coast">
<meta property="og:description" content="basics">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">basics</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/1_download_data.html">Download data</a>
    </li>
    <li>
      <a href="../articles/2_add_coastline.html">Add coastline</a>
    </li>
    <li>
      <a href="../articles/3_stamen_map.html">Stamen map</a>
    </li>
    <li>
      <a href="../articles/4_add_coast_buffer.html">Coastline buffer</a>
    </li>
    <li>
      <a href="../articles/5_add_line_parallel_to_coast.html">Add lines parallel to coast</a>
    </li>
    <li>
      <a href="../articles/6_offshore_points.html">Create offshore points</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ocean-satellite-tools/basics/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="5_add_line_parallel_to_coast_files/header-attrs-2.10/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Add lines parallel to coast</h1>
                        <h4 class="author">EE Holmes</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ocean-satellite-tools/basics/blob/master/vignettes/5_add_line_parallel_to_coast.Rmd"><code>vignettes/5_add_line_parallel_to_coast.Rmd</code></a></small>
      <div class="hidden name"><code>5_add_line_parallel_to_coast.Rmd</code></div>

    </div>

    
    
<p>This example shows how to make a line that is parallel to the coast and how to make a line that follows the coast but removes any inlets (like Puget Sound or San Francisco Bay).</p>
<p>Load the sample data.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"sample_raster"</span>, package<span class="op">=</span><span class="st">"basics"</span><span class="op">)</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="va">sample_raster</span><span class="op">$</span><span class="va">df</span>
<span class="va">ras</span> <span class="op">&lt;-</span> <span class="va">sample_raster</span><span class="op">$</span><span class="va">raster</span>
<span class="va">lons</span> <span class="op">&lt;-</span> <span class="va">sample_raster</span><span class="op">$</span><span class="va">lons</span>
<span class="va">lats</span> <span class="op">&lt;-</span> <span class="va">sample_raster</span><span class="op">$</span><span class="va">lats</span></code></pre></div>
<p>Load the needed packages for plotting.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/raster">raster</a></span><span class="op">)</span></code></pre></div>
<pre><code>## Loading required package: raster</code></pre>
<pre><code>## Loading required package: sp</code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></code></pre></div>
<pre><code>## Loading required package: ggplot2</code></pre>
<div id="download-the-world-coastlines" class="section level2">
<h2 class="hasAnchor">
<a href="#download-the-world-coastlines" class="anchor"></a>Download the world coastlines</h2>
<p>For this buffer, I am using a fairly zoomed out version of the coastline. You could use the coastline from <strong>rnaturalearth</strong>.</p>
</div>
<div id="create-a-line-around-the-worlds-coastlines-at-300-km-offshore" class="section level2">
<h2 class="hasAnchor">
<a href="#create-a-line-around-the-worlds-coastlines-at-300-km-offshore" class="anchor"></a>Create a line around the world’s coastlines at 300 km offshore</h2>
<p>This is a projection in meters (not longlat). Note that I have set the units to km. See comments in the <strong>add_coast_buffer</strong> vignette about why <code><a href="https://rdrr.io/pkg/rgeos/man/misc-gBuffer.html">rgeos::gBuffer()</a></code> must be used and not <code><a href="https://rdrr.io/pkg/raster/man/buffer.html">raster::buffer()</a></code>.</p>
<ul>
<li>Select a project in meters not longlat</li>
<li>Transform our world polygon in that projection</li>
<li>Create a buffer polygon around the world polygon</li>
<li>Erase the interior world polygon (not sure one has to do that but you do)</li>
<li>Clean up by removing some of the small holes in the buffer polygon</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Step 1</span>
<span class="va">newcrs</span> <span class="op">&lt;-</span> <span class="st">"+proj=wintri +lon_0=0 +lat_1=0 +x_0=0 +y_0=0 +datum=WGS84 +units=km +no_defs"</span>
<span class="co"># Step 2 World coastline in meters</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"world"</span>, package<span class="op">=</span><span class="st">"basics"</span><span class="op">)</span>
<span class="va">mworld</span> <span class="op">&lt;-</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/spTransform.html">spTransform</a></span><span class="op">(</span><span class="va">world</span>, <span class="va">newcrs</span><span class="op">)</span>
<span class="co"># Step 3</span>
<span class="va">buff300</span> <span class="op">&lt;-</span> <span class="fu">rgeos</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rgeos/man/misc-gBuffer.html">gBuffer</a></span><span class="op">(</span><span class="va">mworld</span>, width <span class="op">=</span> <span class="fl">300</span>, byid<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>
<span class="co"># Step 4</span>
<span class="va">e</span> <span class="op">&lt;-</span><span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/erase.html">erase</a></span><span class="op">(</span><span class="va">buff300</span>, <span class="va">mworld</span><span class="op">)</span></code></pre></div>
<p>We want just the outer part of this polygon. We will use the <code>remove.holes()</code> function from <strong>spatialEco</strong>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Step 5</span>
<span class="va">e300</span> <span class="op">&lt;-</span> <span class="fu">spatialEco</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/spatialEco/man/remove.holes.html">remove.holes</a></span><span class="op">(</span><span class="fu">spatialEco</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/spatialEco/man/remove.holes.html">remove.holes</a></span><span class="op">(</span><span class="va">e</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning in sp::proj4string(x): CRS object has comment, which is lost in output

## Warning in sp::proj4string(x): CRS object has comment, which is lost in output</code></pre>
<p>Now we can plot and the holes that were removed are the red lines.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">e</span>, border<span class="op">=</span><span class="st">"red"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">e300</span>, add<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">mworld</span>, add<span class="op">=</span><span class="cn">TRUE</span>, col<span class="op">=</span><span class="st">"grey"</span><span class="op">)</span></code></pre></div>
<p><img src="5_add_line_parallel_to_coast_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pts</span> <span class="op">&lt;-</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/SpatialPoints.html">SpatialPoints</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">lons</span>, <span class="va">lats</span><span class="op">)</span>, proj4string <span class="op">=</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html">CRS</a></span><span class="op">(</span><span class="st">"+proj=longlat"</span><span class="op">)</span><span class="op">)</span>
<span class="va">mpts</span> <span class="op">&lt;-</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/spTransform.html">spTransform</a></span><span class="op">(</span><span class="va">pts</span>, <span class="va">newcrs</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">e300</span>, border<span class="op">=</span><span class="st">"red"</span>, axes<span class="op">=</span><span class="cn">TRUE</span>, xlim<span class="op">=</span><span class="va">mpts</span><span class="op">@</span><span class="va">bbox</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span>, ylim<span class="op">=</span><span class="va">mpts</span><span class="op">@</span><span class="va">bbox</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">mworld</span>, add<span class="op">=</span><span class="cn">TRUE</span>, col<span class="op">=</span><span class="st">"grey"</span><span class="op">)</span></code></pre></div>
<p><img src="5_add_line_parallel_to_coast_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
</div>
<div id="create-a-line-around-the-worlds-coastlines-at-10-km-offshore" class="section level2">
<h2 class="hasAnchor">
<a href="#create-a-line-around-the-worlds-coastlines-at-10-km-offshore" class="anchor"></a>Create a line around the world’s coastlines at 10 km offshore</h2>
<p>We could use the method above but the 20 km buffer would dip into the inlets and we don’t want that. We want this to be 280 km inside of the 300km line.</p>
<ul>
<li>Turn <code>e300</code> into lines. Otherwise our 280 km buffer will only be outside and we want the inner one.</li>
<li>Create a 290 km buffer to that</li>
<li>Keep ONLY the holes on that new buffer object.</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">el300</span> <span class="op">&lt;-</span> <span class="fu">as</span><span class="op">(</span><span class="va">e300</span>, <span class="st">"SpatialLines"</span><span class="op">)</span>
<span class="va">buff20</span> <span class="op">&lt;-</span> <span class="fu">rgeos</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rgeos/man/misc-gBuffer.html">gBuffer</a></span><span class="op">(</span><span class="va">el300</span>, width<span class="op">=</span><span class="fl">280</span><span class="op">)</span></code></pre></div>
<p>If we plot this we see that it is on both sides of our 300 km line. We want only the inner lines.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">buff20</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">el300</span>, add<span class="op">=</span><span class="cn">TRUE</span>, col<span class="op">=</span><span class="st">"red"</span><span class="op">)</span></code></pre></div>
<p><img src="5_add_line_parallel_to_coast_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>Remove the outer part of the polygons. Let’s make it lines too.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">e20</span> <span class="op">&lt;-</span> <span class="fu">only.holes</span><span class="op">(</span><span class="va">buff20</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning in sp::proj4string(x): CRS object has comment, which is lost in output</code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">el20</span> <span class="op">&lt;-</span> <span class="fu">as</span><span class="op">(</span><span class="va">e20</span>, <span class="st">"SpatialLines"</span><span class="op">)</span></code></pre></div>
<p>Now it looks better. Potentially we’ll want to remove the smaller polygons (islands).</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">el20</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">el300</span>, add<span class="op">=</span><span class="cn">TRUE</span>, col<span class="op">=</span><span class="st">"red"</span><span class="op">)</span></code></pre></div>
<p><img src="5_add_line_parallel_to_coast_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
<p>We can look off the WA coast.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">el20</span>, col<span class="op">=</span><span class="st">"black"</span>, axes<span class="op">=</span><span class="cn">TRUE</span>, xlim<span class="op">=</span><span class="va">mpts</span><span class="op">@</span><span class="va">bbox</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span>, ylim<span class="op">=</span><span class="va">mpts</span><span class="op">@</span><span class="va">bbox</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">el300</span>, add<span class="op">=</span><span class="cn">TRUE</span>, col<span class="op">=</span><span class="st">"red"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">mworld</span>, add<span class="op">=</span><span class="cn">TRUE</span>, col<span class="op">=</span><span class="st">"grey"</span><span class="op">)</span></code></pre></div>
<p><img src="5_add_line_parallel_to_coast_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
</div>
<div id="add-sample-locations" class="section level2">
<h2 class="hasAnchor">
<a href="#add-sample-locations" class="anchor"></a>Add sample locations</h2>
<p>Now we can add some locations where we will sample the coastline</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">numOfPoints</span>  <span class="op">&lt;-</span>  <span class="fu">rgeos</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rgeos/man/misc-gLength.html">gLength</a></span><span class="op">(</span><span class="va">el20</span><span class="op">)</span> <span class="op">/</span> <span class="fl">100</span>
<span class="va">sample.pts</span> <span class="op">&lt;-</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/spsample.html">spsample</a></span><span class="op">(</span><span class="va">el20</span>, n <span class="op">=</span> <span class="va">numOfPoints</span>, type <span class="op">=</span> <span class="st">"regular"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">el20</span>, col<span class="op">=</span><span class="st">"black"</span>, axes<span class="op">=</span><span class="cn">TRUE</span>, xlim<span class="op">=</span><span class="va">mpts</span><span class="op">@</span><span class="va">bbox</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span>, ylim<span class="op">=</span><span class="va">mpts</span><span class="op">@</span><span class="va">bbox</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">el300</span>, add<span class="op">=</span><span class="cn">TRUE</span>, col<span class="op">=</span><span class="st">"red"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">mworld</span>, add<span class="op">=</span><span class="cn">TRUE</span>, col<span class="op">=</span><span class="st">"grey"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">sample.pts</span>, add<span class="op">=</span><span class="cn">TRUE</span>, pch<span class="op">=</span><span class="fl">1</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/title.html">title</a></span><span class="op">(</span><span class="st">"sample points every 100 km"</span><span class="op">)</span></code></pre></div>
<p><img src="5_add_line_parallel_to_coast_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
</div>
<div id="only-holes-function-direct-from-spatialecoremove-holes" class="section level2">
<h2 class="hasAnchor">
<a href="#only-holes-function-direct-from-spatialecoremove-holes" class="anchor"></a>Only Holes function direct from <code>spatialEco::remove.holes()</code>
</h2>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">only.holes</span> <span class="op">&lt;-</span> <span class="kw">function</span> <span class="op">(</span><span class="va">x</span><span class="op">)</span> 
<span class="op">{</span>
  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/any.html">any</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">%in%</span> <span class="st">"maptools"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> 
    <span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="st">"please install maptools package before running this function"</span><span class="op">)</span>
  <span class="va">xp</span> <span class="op">&lt;-</span> <span class="fu">slot</span><span class="op">(</span><span class="va">x</span>, <span class="st">"polygons"</span><span class="op">)</span>
  <span class="va">holes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">xp</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="fu">methods</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/methods/slot.html">slot</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"Polygons"</span><span class="op">)</span>, 
                                         <span class="fu">methods</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/r/methods/slot.html">slot</a></span>, <span class="st">"hole"</span><span class="op">)</span><span class="op">)</span>
  <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">xp</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu">methods</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/methods/slot.html">slot</a></span><span class="op">(</span><span class="va">xp</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span>, 
                                                        <span class="st">"Polygons"</span><span class="op">)</span><span class="op">[</span><span class="va">holes</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
  <span class="va">IDs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/row.names.html">row.names</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
  <span class="va">x.fill</span> <span class="op">&lt;-</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/SpatialPolygons.html">SpatialPolygons</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/SpatialPolygons.html">Polygons</a></span><span class="op">(</span><span class="va">res</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span>, 
                                                                               ID <span class="op">=</span> <span class="va">IDs</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>, proj4string <span class="op">=</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html">CRS</a></span><span class="op">(</span><span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/is.projected.html">proj4string</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
  <span class="fu">methods</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/methods/slot.html">slot</a></span><span class="op">(</span><span class="va">x.fill</span>, <span class="st">"polygons"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fu">methods</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/methods/slot.html">slot</a></span><span class="op">(</span><span class="va">x.fill</span>, 
                                                            <span class="st">"polygons"</span><span class="op">)</span>, <span class="fu">maptools</span><span class="fu">::</span><span class="va"><a href="http://maptools.r-forge.r-project.org/reference/checkPolygonsHoles.html">checkPolygonsHoles</a></span><span class="op">)</span>
  <span class="fu">methods</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/methods/slot.html">slot</a></span><span class="op">(</span><span class="va">x.fill</span>, <span class="st">"polygons"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fu">methods</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/methods/slot.html">slot</a></span><span class="op">(</span><span class="va">x.fill</span>, 
                                                            <span class="st">"polygons"</span><span class="op">)</span>, <span class="st">"comment&lt;-"</span>, <span class="cn">NULL</span><span class="op">)</span>
  <span class="va">pids</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="fu">methods</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/methods/slot.html">slot</a></span><span class="op">(</span><span class="va">x.fill</span>, <span class="st">"polygons"</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">methods</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/methods/slot.html">slot</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"ID"</span><span class="op">)</span><span class="op">)</span>
  <span class="va">x.fill</span> <span class="op">&lt;-</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/SpatialPolygons.html">SpatialPolygonsDataFrame</a></span><span class="op">(</span><span class="va">x.fill</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>row.names <span class="op">=</span> <span class="va">pids</span>, 
                                                            ID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">pids</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">x.fill</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="http://eeholmes.github.io/">Eli Holmes</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
